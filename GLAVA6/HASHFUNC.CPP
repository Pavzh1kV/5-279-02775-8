/* ******************************************************************** */
/* ВЫЧИСЛЕНИЕ ФУНКЦИИ РАССТАНОВКИ ПО СУММЕ СИМВОЛОВ КЛЮЧА:              */
/* СО СДВИГОМ И БЕЗ СДВИГА, С УМНОЖЕНИЕМ НА ДРОБНОЕ ЧИСЛО И БЕЗ         */
/* УМНОЖЕНИЯ, ПО ЗНАЧЕНИЯМ ПЕРВЫХ ДВУХ СИМВОЛОВ	\hashfunc.cpp           */
#include <stdio.h>
#include <locale.h>
#include <stdlib.h>
#include <string.h>
//#include <conio.h>
/*char F[40][12]={"Артюхов","Антонов","Адов","Громов","Аров","Адамов",
					  "Аглаков","Абрамов","Абрамович","Абасов",
						"Баринов","Бовов","Градов","Дядя","Елин","Ёлин","Жлин",
						"Зоин","Иванов","Йошкар","Котов","Лотов",
						"Мотов","Нотов","Отов","Попов","Ротов","Сотов","Титов",
						"Фёдоров","Хусаинов","Цальп","Чугунов","Шадрина",
						"Щукин","Эмма","Ютов","Яковлев"};*/
char F[41][41] =
{
    "Андрианов", "Астафьев", "Балахонский",
    "Балашов", "Бебешин",
    "Белоусов", "Бойко", "Гоканов", "Ивашнёв",
    "Каменев",
    "Кондрашов", "Королев", "Коротаев",
    "Кравцов", "Красовский",
    "Кудрин", "Лямин", "Москалев", "Пальгов",
    "Перфильев",
    "Прокин", "Рудаев", "Саенко", "Седов",
    "Сёмкин", "Скороходов",
    "Смирнов", "Соловьев", "Сутчев", "Сухий",
    "Терещенко",
    "Фетисов", "Чекалин", "Шишов", "Щукин",
    "Этов",
    "Ютов", "Язов"
};

/* =================================================================== */
int main()
{
    setlocale(LC_ALL,"Russian");
    int i, j;
    int k;
    unsigned long s, N = 37;
    double p = 0.6180339887, k1;
    printf
    ("\n\n Вычисление функций расстановки\n");
    for (i = 0; i < 38; i++)
    {
        printf("\n %12s ", F[i]);

        /* По сумме символов ключа со сдвигом <<3 */
        j = 0;
        s = 0;
        while (F[i][j])
            s = (s << 3) + (unsigned int) F[i][j++];	/* сумма со сдвигом */
        k = s % 41;		/* адрес входа */
        printf("%4d", k);
        /* по сумме со сдвигом и умножением на дробное число */
        k1 = p * s;
        k1 = k1 - (int) k1;	/* дробная часть k1 */
        k = (int) (k1 * 41);	/* адрес входа */
        printf("%4d", k);

        /* По сумме символов ключа без сдвига */
        s = 0;
        j = 0;
        while (F[i][j])
            s = s + (unsigned int) F[i][j++];	/* сумма без сдвига */
        k = s % 41;		/* адрес входа */
        printf("%4d", k);

        /* по сумме с умножением на дробное число */
        k1 = p * s;
        k1 = k1 - (int) k1;	/* дробная часть k1 */
        k = (int) (k1 * 41);	/* адрес входа */
        printf("%4d", k);

        k = ((unsigned int) F[i][0] % 41 + (unsigned int) F[i][1] % 40 +
             1) % N;
        printf("%4d", k);
        getchar();
    }
}

/* ******************************************************************** */
